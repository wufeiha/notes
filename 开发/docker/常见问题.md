## save/load与import/export的区别

export 和 import 导出的是一个容器的快照, 不是镜像本身, 也就是说没有 layer。

你的 dockerfile 里的 workdir, entrypoint 之类的所有东西都会丢失，commit 过的话也会丢失。

快照文件将丢弃所有的历史记录和元数据信息（即仅保存容器当时的快照状态），而镜像存储文件将保存完整记录，体积也更大。

-  docker save 保存的是镜像（image），docker export 保存的是容器（container）
-  docker load 用来载入镜像包，docker import 用来载入容器包，但两者都会恢复为镜像
-  docker load 不能对载入的镜像重命名，而 docker import 可以为镜像指定新名称

## 什么是AUTOMATED

### 是什么

自动化构建，就是使用Docker Hub连接一个包含Dockerfile文件的GitHub仓库或者BitBucket仓库，Docker Hub则会自动构建镜像，通过这种方式构建出来的镜像会被标记为Automated Build，也称之为受信构建（Trusted Build），这种构建方式构建出来的镜像，其他人在使用时可以自由的查看Dockerfile内容，知道该镜像是怎么来的，同时，由于构建过程是自动的，所以能够确保仓库中的镜像都是最新的。一旦GitHub仓库中的Dockerfile文件有更新，Docker Hub上的镜像构建就会被自动触发，不用人工干预，从而保证镜像始终都是最新的。

### 为什么

现在的产品和开发环境都依赖docker，在部署的时候发现修改线上镜像非常的麻烦，通常一个完整的部署需要以下几步：

- 本地编写测试dockerfile

- 上传dockerfile到测试环境

- 删除原有镜像

- 测试环境构建新镜像

- 上传dockerfile到线上

- 删除原有镜像

- 上线环境构建新镜像

## Bind mounts与volume的区别

  - 当容器外的对应目录是空的，volume会先将容器内的内容拷贝到容器外目录，而mount会将外部的目录覆盖容器内部目录！mounts方式是双向的，volume是单向的
  - volume 还有一个不如bind mount的地方，不能直接挂载文件。
  - 与 bind mount 相比，volume 更容易备份或迁移。
  - volume 在 Linux 和 Windows 容器上都能工作。
  - volume 可以在多个容器之间更安全的共享。
  - volume 驱动程序允许你在远程主机或云上提供存储、加密或其他功能。
  - Volume避免重要的数据，因容器重启而丢失，这是非常致命的;避免容器不断变大

## ADD命令与COPY命令的区别

- ADD：拷贝文件，支持自动解压及远程文件，COPY命令的超集功能强大，但是比较复杂
- COPY：拷贝文件，如果没有自动解压及拷贝远程文件的需求，推荐优先使用
- 远程URL获取资源的情况，由于ADD指令不支持认证，如果从远程获取资源需要认证，则只能使用RUN wget或RUN curl替代
- 源路径如果是一个目录，则该目录下的所有内容都将被加入到容器，但是该目录本身不会
- 如果源路径是个文件，且目标路径是以 / 结尾， 则docker会把目标路径当作一个目录，会把源文件拷贝到该目录下。
  如果目标路径不存在，则会自动创建目标路径。
- 如果源路径是个文件，且目标路径是不是以 / 结尾，则docker会把目标路径当作一个文件
- Docker 团队的建议是在大多数情况下使用COPY
## compose、machine、 与swarm的区别

**docker-machine是解决docker运行环境问题。**

docker技术是基于Linux内核的`cgroup`技术实现的，那么问题来了，如果在非Linux平台上使用docker技术需要依赖安装Linux系统的虚拟机。
docker-machine就是docker公司官方提出的，用于在各种平台上快速创建具有docker服务的虚拟机的技术。你可以把它理解为virtualbox或者vmware，最开始在win7上用得比较多，但是win10开始自带了hyper-v虚拟机，已经不再需要docker-machine了，docker可以直接运行在安装了Linux系统得hyper-v上。

**dcoker-compose主要是解决本地docker容器编排问题。**

**docker-swarm是解决多主机多个容器调度部署得问题，对标k8s。**



